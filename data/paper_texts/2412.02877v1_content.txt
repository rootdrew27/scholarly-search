SECTION: Machine Learned Potential for High-Throughput Phonon Calculations of Metal–Organic Frameworks
Metal–organic frameworks (MOFs) are highly porous and versatile materials studied extensively for applications such as carbon capture and water harvesting. However, computing phonon-mediated properties in MOFs, like thermal expansion and mechanical stability, remains challenging due to the large number of atoms per unit cell, making traditional Density Functional Theory (DFT) methods impractical for high-throughput screening. Recent advances in machine learning potentials have led to foundation atomistic models, such as MACE-MP-0, that accurately predict equilibrium structures but struggle with phonon properties of MOFs. In this work, we developed a workflow for computing phonons in MOFs within the quasi-harmonic approximation with a fine-tuned MACE model, MACE-MP-MOF0. The model was trained on a curated dataset of 127 representative and diverse MOFs. The fine-tuned MACE-MP-MOF0 improves the accuracy of phonon density of states and corrects the imaginary phonon modes of MACE-MP-0, enabling high-throughput phonon calculations with state-of-the-art precision. The model successfully predicts thermal expansion and bulk moduli in agreement with DFT and experimental data for several well-known MOFs. These results highlight the potential of MACE-MP-MOF0 in guiding MOF design for applications in energy storage and thermoelectrics.

SECTION: Introduction
Metal–organic frameworks (MOFs) are composed of organic molecules, called linkers, connected to inorganic ions or clusters, called nodes. MOFs are nanoporous materials that, due to their large modular nature and high porosity, have become strong candidates for many potential applications ranging from water harvestingand catalysis to biosensing. Some important physical properties that make MOFs suitable for such potential applications include mechanical stability, thermal expansion, heat conduction and superconductivity which are influenced by phonon-mediated lattice dynamics. Phonons describe the collective vibrations of atoms in a crystal and interact with electronic and thermal excitations that affect these physical characteristics of MOFs.
However, the current understanding of these properties in MOFs is limited due to the computational complexity of predicting phonons in these large structures. Currently, one of the most reliable methods to study the electronic structure of materials and their properties is Density Functional Theory (DFT). However, for materials like MOFs that can have several hundreds or even thousands of atoms in their unit cell, performing supercell calculations necessary for obtaining accurate phonons becomes too computationally expensive for screening applications.

Semi-empirical Quantum Mechanical methods, such as the Density Functional Tight Binding (DFTB) method, have been used to compute phonons in few highly symmetric isoreticular MOFs. While DFTB is 2–3 orders of magnitude faster than DFT, its pair-wise parametrization strategy and lack of available metal atom parameters limits its use in screening applications for obtaining phonons in MOFs. The GFN1-xTB methodemerged to avoid this pair-wise parametrization problem of DFTB and is capable of handling thousands of atoms. In, the GFN1-xTB method has been reported to produce cell parameters within a 5% deviation (relative to experiments) for 75% of the MOFs in the CoRE databaseshowing promise for adsorption applications and obtaining binding energies, but has not been analyzed for vibrational properties in MOFs.

Traditional force fields like UFFand CHARMMare widely used due to their scalability and significant speed up in calculations compared to tight-binding DFT. UFF4MOF, which is UFF re-parametrized for MOFs, can be used for rapid structure prediction and screening. However, this transferability comes with limitations in accurately predicting dynamical properties such as phonons.. There are other DFT-derived force fields like the MOF-FF model, which predicted the lattice parameters of some well known MOFs like MOF-5, UiO-66 within 0.5% deviation relative to DFT. But its system-specific parametrization can be very complex and time-consuming for large phonon calculations in diverse MOFs. Force fields derived with a focus on vibrational properties for MOFs have been reported like VMOF. While the VMOF model reproduced optimized lattice parameters and phonon density of states in good agreement with DFT, important phonon-derived properties like bulk modulus obtained with VMOF underestimated DFT predictions by more than 50% even for standard MOFs like UiO-66 and MOF-5. These limitations of such classical force fields are because of the vast combinations of possible frameworks in the MOF chemical space that make their parameter optimization and selection of functional form extremely challenging.

Recently, several neural network-based machine learning potentials (MLPs) such asand on-the-fly MLPs such as kernel-based potentials in the Vienna Ab initio Simulation Package(VASP MLPs) and Moment Tensor Potentials (MTP)reported inhave emerged that produce vibrational properties with sufficient accuracy relative to DFT for MOFs. However, such on-the-fly MLPs are restricted to the specific MOF included in the training set, and the need for continuous regeneration and retraining on DFT data to incorporate new configurations renders them impractical for high-throughput screening of MOFs.
Therefore, the need for a ready-to-use transferrable model for screening dynamical properties in MOFs motivates the development of new MLPs.

MLPs like the MACE foundation model (MACE-MP-0), which utilizes the MACE architectureof an equivariant message-passing graph tensor network with many-body information of atomic features encoded in each layer, has been tested on MOFs. Like several MLPs and force fields that are trained on MOF building blocksrather than on whole MOFs because of their large chemical space and size of the unit cell, the MACE-MP-0 model was trained on the MPtrj dataset of 150k inorganic crystals. The MACE-MP-0 demonstrated high accuracy in predicting the potential energy surface, with a root-mean-squared-error of 33 meV/atom in energies relative to DFT for the 20k MOFs in the QMOF database. The foundation model thus, demonstrates its transferability in being able to capture some of the complex interactions in MOFs and shows potential to further improve and investigate its accuracy for phonons and derived properties in MOFs.

In this work, we introduce MACE-MP-MOF0, a highly accurate model derived from MACE-MP-0b (medium model), fine-tuned on a high-quality dataset of 127 representative MOFs. The MACE-MP-0b model is a slightly modified version of the original MACE-MP-0 (which was released in April 2024) to address few shortcomings of the original model such as dealing with short-distance collapse by adding a ZBL potential.The model is evaluated for key properties derived from phonons in well-known and representative MOFs, such as bulk moduli and thermal expansions, within the quasi-harmonic approximation, allowing for a comprehensive comparison with previous models and experimental data reported in the literature. MACE-MP-MOF0 accurately reproduces experimentally observable phenomena, such as negative thermal expansion in MOFs, demonstrating its applicability beyond computational predictions. In addition to analyzing the performance of the model on MOFs in the curated dataset, we test its transferability on other well-known MOFs not seen by the model during the training and find excellent agreement in the predicted bulk modulus wih DFT and experiments. The presented model is therefore ready-to-use for high-throughput phonon calculations of MOFs and aims to incorporate more chemically diverse MOFs in future generations of the model.

SECTION: Results
SECTION: Dataset Curation
To date, tens of thousands of MOFs have been synthesized, and countless more can be designeddue to the vast diversity of their chemical building blocks, making the selection of an appropriate training set particularly challenging. In this work, in addition to studying 19 prototypical and experimentally widely studied MOFs for gas storage, catalysis and defect engineering (see Supplementary Information (SI)), we expand our dataset by curating 108 more structures from the 20,375 diverse MOFs in the QMOF database.

For sampling these 108 structures, we considered MOFs with pore limiting diameters (PLDs) greater than 3.6 Å, using nitrogen as a probe molecule. MACEdescriptors hold a large amount of information regarding the atomic features of MOFs and hence were used to sample 100 diverse MOFs. These MOFs were selected to span over all the 7 crystal symmetry systems and diverse bonding interactions. Therefore, as shown in Figure(c, d), this dataset consists of 127 representative MOFs spread over a wide range of 24 elements in the inorganic clusters and organic ligands. Figure(a, b) shows the MACE descriptor space diversity for the curated 127 MOFs (refer the SI for the main features of the sampled MOFs).

On this curated dataset of 127 MOFs, we have used various strategies to generate DFT data points for fine tuning: i) molecular dynamics simulations (an NPT ensemble using MACE-MP-0b+D3), from which frames were selected with a farthest point sampling (FPS) approach to maximize spread in descriptor space (refer SI), ii) strained configurations generated by expanding and compressing unit cells using an equation of state approach, iii) geometry optimization trajectories of various structures by retaining a relatively small number of frames (up to 10, if available), using the FPS approach (refer the Methods section and SI for further details). The aforementioned calculations result in a total of 4764 DFT data points split into 85% for training and 7.5% each for testing and validation. We have fine-tuned two models, MACE-MP-MOF0 and MACE-MP-MOF0-v2 where the two models differ only via the way in which the data was split into train, test and validation sets, with the former using a random approach, while the latter using an FPS approach. The goal of comparing the two versions of the fine-tuned model is to show that the performance of these models is comparable regardless of the reference configurations in the training set sampled from this curated dataset.

SECTION: Phonon Workflow
As illustrated in Figure, the phonon workflow for MACE-MP-MOF0 begins with a full cell relaxation, unconstrained by the symmetry of the input configuration. This step is crucial for ensuring the model’s applicability in screening scenarios, particularly when working with MOFs whose stable symmetry configurations are unknown. The full cell relaxation is performed with ASE’sL-BFGS and FrechetCellFilter optimizers until the max force component iseV/Å. The search for equilibrium structure is stopped if any negative phonon frequencies presentTHz. The process for eliminating spuriousimaginary modes that are larger than this threshold is discussed in the Methods section. The symmetry of the equilibrium structure is determined using Pymatgen’sspace group analyzer with a symmetry search tolerance offor determining number of symmetry inequivalent displacements.

This work aims to quantitatively compare MACE-MP-MOF0 with models based on various theoretical levels reported in the literature and to ensure consistency across all levels of theory, the Finite Difference (FD) approach is chosen for phonon calculations. The displacements of 0.001are produced on the atoms in thesupercell for obtaining force constants with the FD approach.

The Harmonic Approximation (HA) for computing phonons fails to capture essential physical properties for MOFs such as thermal expansion, phase transition and elastic moduli. On the other hand, the Quasi-Harmonic approximation (QHA) is an extension of the HA that aims to capture anharmonicity by introducing the volume dependence of frequencies due to temperature and pressure effects. In this work, we use the Phonopy package version 2.29.0 to study thermal and mechanical properties of MOFs by studying the lattice dynamics under the QHA on ak-point grid, beyond thepoint which is essential for accurately capturing heat transport properties.

SECTION: Overview of the investigated systems and potentials for benchmarking
In this work, we benchmark the MACE-MP-MOF0 and MACE-MP-MOF0-v2 models against DFT, extended tight-binding DFT, MLPs and experiments. Among MLPs, we focus on a wide range of models from MACE-MP-0b (with D3 dispersion) to MTP and VASP MLP for MOFs. For extended tight-binding DFT, we use the GFN1-xTB model. The GFN1-xTB model was built with a focus on the computation of molecular geometries, vibrational frequencies, and non-covalent interaction energies which are all important for this study of MOFs.

The MOFs chosen for benchmarking the phonons calculated with the MACE-MP-MOF0 models are widely studied and hence, enables thorough comparison of performance across the aforementioned models and experiments reported in literature. The investigated systems of MOF-5 (Zn), UiO-66 (Zr), MOF-74 (Zn) and MIL-53 (Al) are diverse in their nodes, linkers and topology (refer Table). In this work, we study the large-pore configuration of the flexible framework, MIL-53 (Al). The presence or absence of these MOFs in the training sets of the two versions of MACE-MP-MOF0 models help analyze the transferability of the model and the performance dependence on the choice of training set. In addition to the primary benchmarking of phonon density of states and band structures for these four MOFs, benchmarking of the phonon-derived bulk modulus is done for several other well-known MOFs in literature which are not a part of the curated dataset for demonstrating the transferability of the MACE-MP-MOF0 model.

SECTION: Benchmarking prediction of unit cell parameters of equilibrium structures
The first crucial step of benchmarking phonons is to accurately capture the equilibrium structure of the MOFs. Predictions of both MACE-MP-MOF0 and MACE-MP-MOF0-v2 show excellent agreement with DFT with a largest deviation ofas shown in Figure. The MACE-MP-0b deviations are much larger, with the largest deviation of 10%.

As shown in Table, MACE-MP-MOF0 and MACE-MP-MOF0-v2 also predict the right space group for all MOFs while GFN1-xTB and MACE-MP-0b transform the unit cell to different space groups after a full cell relaxation. Even though GFN1-xTB produces deviationswhich are in good agreement with DFT, the minor distortions in unit cell lengths and angles shown in Table, cause the identification of a different symmetry. As a result, obtaining phonons with GFN1-xTB for a highly symmetric structure like MOF-5 incurs a 17-fold increase in computational cost compared to the MACE-MP-MOF0 models. Symmetrizing the optimized unit cell by loosening the symmetry search tolerance does not eliminate the distortions and does not achieve the true symmetry with GFN1-xTB (see SI). Such symmetrizing procedures are not needed with the MACE-MP-MOF0 models, which enables a full cell relaxation. Hence, in this work, the equilibrium structure is obtained by allowing the relaxation of only atomic positions with GFN1-xTB for phonon calculations.

SECTION: Benchmarking predictions of forces, energies and stress
As phonon dispersion curves and density of states are obtained from force constants, an accurate description of interatomic forces in MOFs is necessary. Tableshows the performance of both MACE-MP-MOF0 and MACE-MP-MOF0-v2 in obtaining the forces, energies and stress on their respective test sets. A linear fit with anscore0.999 is obtained for forces, energies and stress with MACE-MP-MOF0 and MACE-MP-MOF0-v2 relative to DFT for their respective training, test and validation sets (refer SI for figures).

The analysis of element-wise mean absolute errors (MAE) in energies relative to DFT for the MOFs in the QMOF database containing the 24 elements in the curated dataset reveal that the MACE-MP-0b predictions were 80% larger than the MACE-MP-MOF0-v2 MAE predictions of 0.016 eV/atom (see SI). The MACE-MP-MOF0-v2 model shows significant improvement of 50% in the energy MAE for MOFs with metal nodes like Zn, Al, Mg (which constitute a large set in the QMOF database) and in Hf and Zr-based MOFs (which are widely studied due to their importance in defect engineering of MOFs). The energy MAEs for integral elements of organic linkers like C, H and O common to all MOFs are also approximately lowered by 36% with MACE-MP-MOF0-v2. Hence, overall we achieve a significant improvement in the MAE for the majority of the 24 elements in the curated MOFs, which cover 60% of the QMOF database, by including a small number of their reference configurations in the training dataset.

In addition to benchmarking the MACE-MP-MOF0 models for the curated dataset, we test the model for forces and energies on 70 more diverse MOFs unseen by the model during training (see SI for structure details). As shown in Table, the MACE-MP-MOF0 models exhibit energy RMSDs relative to DFT that are five times lower than those of MACE-MP-0b, while also delivering 30% more accurate forces and stresses for these out-of-sample MOFs.
We observe the deviations on out-of-sample MOFs to be 10 times the RMSDs of MACE-MP-MOF0 models on the curated dataset in Table, which demonstrates the significant improvement that can be achieved by adding a few reference configurations of MOFs to the training DFT data.

SECTION: Benchmarking vibrational properties
After benchmarking forces, energies and stresses we quantitatively analyze the derived phonon density of states and band structures. In Figure, phonon density of states (DOS) data is shown up to 20THz (see SI for the full range of predicted frequencies). The MACE-MP-MOF0 and MACE-MP-MOF0-v2 models are in very good agreement with DFT DOS, even well above the low frequency range (6THz). We were able to eliminate all spurious imaginary modes with the MACE-MP-MOF0 models to obtain physically meaningful frequencies. While GFN1-xTB and MACE-MP-0b capture certain aspects of the DOS curves accurately,, they fail to accurately capture the vibrational properties of the most prototypical MOFs like MOF-5 and UiO-66.

Tableshows the exceptional performance of MACE-MP-MOF0 and MACE-MP-MOF0-v2 in accurately obtaining the phonon frequencies for the full frequency range relative to DFT as compared to MTP and VASP MLP predictions. It is important to highlight that achieving this level of accuracy with on-the-fly MLPs requires generating extensive DFT datasets tailored to specific MOFs. The MACE-MP-MOF0 training set had 12 times less (or no reference configurations for the respective MOFs as indicated in Table) than the training set for these on-the-fly MLPs. The DFT data used here for benchmarking phonons, as well as the training data for the MTP and VASP MLP was generated inwith an extremely tight convergence criteria of, which are necessary to obtain accurate phonons rendering the DFT calculations very expensive. Whereas, the training DFT data generated in this work for MACE-MP-MOF0 models used a significantly cheaper convergence criteria of(refer to the Methods section for details). This demonstrates that the fine-tuned MLP, MACE-MP-MOF0, can achieve the same high-quality ab initio description as other accurate machine-learned force field potentials for MOFs, but with significantly reduced DFT costs during training set generation..

The similar errors obtained with MACE-MP-MOF0 and MACE-MP-MOF0-v2 in Tableshow that the absence or presence of the investigated systems in their respective training sets does not significantly affect the performance of the model, and that the curated dataset is representative to capture the lattice dynamics of out-of-training set MOFs.
Since MACE-MP-MOF0 and MACE-MP-MOF0-v2 models exhibit similar frequency errors, we use the slightly better performing MACE-MP-MOF0-v2 model for these MOFs to show the accurate overlap between the band structures predicted with DFT and MACE-MP-MOF0-v2 in Figure. Due to the large number of bands in MOFs, the band structures in figureare restricted to the low frequency region.

SECTION: Benchmarking of mechanical properties
Here, we analyze mechanical properties, such as the bulk modulus, for additional widely studied MOFs beyond the four systems investigated, comparing them to experimental and DFT data reported in the literature. The bulk modulus is obtained from fitting the Birch-Murnaghan equation of state to energy-volume data obtained by straining the cell.
From Figure, we observe that MACE-MP-MOF0 and MACE-MP-MOF0-v2 are able to qualitatively capture bulk moduli trends, as compared to DFT and experimental data, as well as quantitatively reproduce the values with minor deviations.

The deviations in bulk modulus with MACE-MP-MOF0 versions relative to DFT are the largest for MIL-125 in Figureb), which notably, is the only Ti-based MOF in the curated dataset. Serendipitously, the MACE-MP-MOF0 and MACE-MP-MOF0-v2 predictions of bulk moduli actually perform better than the explicit DFT data, relative to experiments. The DFT data includes VdW corrections, which tends to overestimate the long range interactions in MOFsand therefore produces higher bulk modulus than experiments. As the MACE-MP-MOF0 model was trained on DFT data with vdW corrections included, these long-range interactions are therefore slightly underestimated in the model relative to DFT, which moderates the bulk moduli predictions. Hence, the small RMSDs obtained for phonon frequencies with MACE-MP-MOF0-v2 and MACE-MP-MOF0 translate to low deviations in phonon-derived properties, such as the bulk modulus.

The agreement between experiments, DFT and MACE-MP-MOF0 models in obtaining the bulk modulus of out-of-sample, well-known MOFs like ZIF-4, ZIF-8, IRMOF-14 and UiO-66-Hf demonstrates the transferability of the model.

SECTION: Negative Thermal Expansion in MOFs
The data available in literature for negative thermal expansion (NTE) obtained through experiments for MOFs is scarce. At the same time, obtaining NTE with DFT is challenging due to the expensive quasi-harmonic phonon calculations for MOFs. Hence, in this work, we restrict our analysis of NTE to MOF-5 and UiO-66 as they are widely studied in experiments and their high symmetry and isotropic nature reduces the cost of such expensive computations.

Comparing DFT and MACE-MP-MOF0-v2 predictions to experimental data is challenging, as factors such as pressure, cooling or heating rates, as well as defect concentration can vary significantly in experiments, influencing the recorded NTE. For example, in, the authors observed that, while the equilibrium UiO-66 intrinsically shows a coefficient of thermal expansion (CTE) of, a wide range of CTE fromis recorded depending on the rate of thermal treatment in UiO-66, suggesting a re-evaluation of previous experimental reports of NTE in MOFs.

Based on the available data, we find that MACE-MP-MOF0-v2 predictions are in very good agreement with DFT and other computational models and qualitatively capture experimental NTE trends, such as the larger NTE observed for UiO-66 compared to MOF-5 (see Table).

SECTION: Discussion
Benchmarking the vibrational properties of the investigated MOFs highlights the limitations of MACE-MP-0b and GFN-1xTB, while demonstrating the excellent agreement of the MACE-MP-MOF0 models with DFT in accurately capturing the full phonon vibrational spectra. We further rationalize the performance of these models by analyzing their ability in accurately capturing the atomic positions and interactions in the equilibrium structurefor MOF-74. An accurate capture of atomic positions in the MOF provides a better description of forces, which ultimately correlates to the partial phonon density of states (PDOS) obtained with DFT in Figure.

Figurefor MOF-74 shows that the GFN1-xTB method is in good agreement with DFT for frequencies lower than 6 THz, above which the errors signficantly increase. The overlap is better in the lower frequency range because this region is dominated by the heavy Zn atom vibrations which have low RMSDs in Table. The GFN1-xTB and MACE-MP-0b errors in the atomic positions for C and O, dominating the vibrations beyond 6THz, are ten to hundred times larger than the MACE-MP-MOF0 errors. The greater flexibility and higher rotational degrees of freedom of these atoms in the organic linkers are more difficult to capture than the surrounding metal nodes.Therefore, the GFN1-xTB method accurately captures the vibrations of the metal nodes, but it inadequately represents the interactions between atoms in the organic linkers for phonon calculations. As the MACE-MP-MOF0 models consistently achieves ten to thousand times lower errors for all the elements present in the MOFs than GFN1-xTB and MACE-MP-0b, we obtain the high agreement between DFT and MACE-MP-MOF0 model predictions throughout the phonon spectra (see SI for the analysis of other MOFs). MACE-MP-MOF0 demonstrates a significant improvement in capturing the covalent interactions in MOFs, addressing the limitations of MACE-MP-0b and GFN1-xTB, which primarily capture non-covalent interactions. This enhancement positions MACE-MP-MOF0 as a promising tool for systems beyond MOFs, where covalent interactions dominate, such as in covalent organic frameworks..

In summary, in this work, we present a fine-tuned MLP for MOFs, MACE-MP-MOF0, that can be used to produce ab-initio quality phonons in a high-throughput way. The model was trained on a representative dataset of 127 MOFs selected by efficiently sampling the phase space based on MACE descriptors which significantly reduced the computational efforts in generating DFT reference data. The MACE-MP-MOF0 model predicts phonon-derived bulk modulus in excellent agreement with experiments and DFT on MOFs unseen by the model, demonstrating its transferability.

The MACE-MP-MOF0 model presented here is 50% faster than the foundation model (with dispersion corrections included) and 10 times more accurate in obtaining optimized geometries, forces, energies and stresses which are crucial for obtaining accurate vibrational properties. The MACE-MP-MOF0 model is 90% faster than GFN1-xTB when handling large MOFs (500 atoms per unit cell) (see SI) The computational efficiency and accuracy of the model make it an excellent candidate for screening phonon-derived properties, such as bulk modulus, in MOFs, providing a quantitative description that aligns closely with experimental and DFT results. The model can calculate phonons within the quasi-harmonic approximation to obtain ab initio-level thermal expansions, which would otherwise be computationally expensive to obtain using DFT for MOFs.

Through the preliminary analysis for thermal expansion of MOF-5 and UiO-66 with MACE-MP-MOF0 and DFT, we conclude that the quasi-harmonic approximation does not provide a sufficient description of anharmonic effects in MOFs and is an area with scope for improvement in the computational study of vibrational properties of MOFs. While MACE-MP-MOF0 accurately predicts phonons in the majority of the frequency range (0 to 60 THz) which dominate most of the physical properties of interest, nevertheless, further improvement is possible by capturing the high frequency range (90 - 100 THz, which correspond to the vibration of H atoms in the linkers) as shown in Figure. We would also like to highlight that while the current model covers 60% of MOFs in the QMOF database that span the same chemical space of metal nodes as the 127 MOFs, these sampled MOFs are majority closed-shell metal ions, which avoids electronic spin-degrees of freedom. In MOFs with magnetic elements, having training data of atomic configurations with different spin-states in the same MOF can lead to poor training of the MLP. HKUST-1, a well-known Cu-based MOF, is the only MOF in the curated dataset with a magnetic element which contributes to the higher element-wise MAE obtained with MACE-MP-MOF0 for Cu (refer SI). In addition to the model presented here being ready-to-use for a wide range of metallic nodes, organic linkers, and topologies, it is significantly easier to re-parameterize than traditional force fields like MOF-FF for adding new species by including a few reference configurations of the MOF to the DFT training set.

In conclusion, the presented model provides a platform for performing high-throughput calculations in an efficient manner to guide the design and synthesis of MOFs for complex dynamical properties. The reported data motivates further development of MLPs that are easy-to-train and transferable to replace extremely expensive ab initio methods for the analysis of lattice dynamics in MOFs.

SECTION: Methods
SECTION: DFT Calculations
The DFT computations for generating the dataset were performed using VASPand the atomate2 software. Since MACE-MP-0b was trained on the MPtrj dataset, we ensured consistency by using the same parameters and pseudo potentials to produce our DFT training dataset. The Perdew-Burke-Ernzerhof (PBE) form of the generalized gradient approximation (GGA) exchange-correlation functionalwas used along with the Projector Augmented Wave (PAW) method (version 54). A D3(BJ) van der Waals correctionwas included for all MOFs, which eliminated some spurious phonon instabilities. In, it has been shown that different functionals perform similarly in structure prediction when applied to chemically diverse MOFs for screening purposes. Hence, the chosen PBE-D3 (BJ) functional offers computational consistency and convenience for the diverse curated dataset. Adding the dispersion correction to the training DFT data instead of adding dispersion on the MACE-MP-0b model increased the speed of the model by 1.5 times (refer SI).

Static DFT data was produced with an energy convergence ofeV. The cutoff energy for the plane-wave basis set was set to 520 eV. Geometry optimization was performed on deformed configurations of the curated MOFs to produce trajectories with DFT with a force convergence ofev/Å. DFT data for Equation of State (EOS) was generated by obtaining the energies of 6 isotropic deformations with a linear deformation ranging from - 10% to 10% using the Birch-Murnaghan EOS.

SECTION: Improving accuracy of MLP via Fine-tuning
Fine tuning was carried out on our curated dataset using the multi-head approach as implemented in the MACE code starting with version 0.3.7. We used MACE-MP-0b as one head and our PBE+D3(BJ)calculations as the other head. The ratio of weights for the loss functions for energy, forces and stresses was 1:10:100 and we tuned the MLP training for 2500 epochs. It is important to note that during the training process, MACE employs a FPS approach to select configurations from the original MPtrj training setand adds them to our data. Tableshows the final convergence results for the fine tuning for the two models trained, MACE-MP-MOF0 and MACE-MP-MOF0-v2. Due to the relatively large number of atoms in our training set per MOF, training was carried out on 16 A100@40GiB RAM NVIDIA GPUs.

SECTION: Dealing with phonon imaginary modes
Observing phonon imaginary modes for MOFs are common when the geometry optimization leads to a configuration which does not correspond to the minima of the potential energy surface. Among the curated dataset, NOTT-300 is a prototypical example that shows this phenomenon. We tested three methods to eliminate such spurious imaginary modes: i) Mode Mapping – The process begins by identifying modes with negative frequencies and generating a structure by displacing the atoms along the imaginary mode. The structure is then geometry-optimized, followed by standard phonon calculations. Large enough displacements are needed to escape the local minima. This method is convenient for structures having only few imaginary modes. ii) Structure rattling – this method is by far the most brute-force method, but surprisingly effective. Here, we used the ASErattle implementation which perturbs atomic positions with random displacements drawn from a normal distribution of 0.01 standard deviation. It is possible to rattle the full structure or only atoms involved in the imaginary modes, such as the H atoms that hydroxylate the inorganic centre in NOTT-300. Once rattled, the structure is regularly geometry optimized, and iii) Molecular Dynamics – in this method, we perform a low-temperature NVE ensemble simulation at T = 7.5 K or 10 K for as few as 40 steps, using either the MACE-MP-0b potential or the fine-tuned MACE-MP-MOF0 potential. We perform geometry optimization on the last frame of the resultant simulation. Importantly, specific atoms may be fixed in position if needed during the molecular dynamics simulation. All three methods mentioned above successfully eliminate imaginary modes, with methods ii) and iii) being preferred due to their ease of application and better suitability for handling structures with a large number of negative frequencies. The process of eliminating imaginary modes is stopped when the remaining negative frequencies become negligible (THz).

SECTION: Data Availability
All datasets that were used and/or generated in this work are publicly available in this repository: https://github.com/ddmms/data/tree/main/mace-mof-0

SECTION: Code Availability
The scripts used to generate the training DFT dataset, the MACE-MP-MOF0 models are provided here: https://github.com/ddmms/data/tree/main/mace-mof-0

SECTION: Supplementary Information
The supplementary information is available

SECTION: Acknowledgments
This research used resources of the National Energy Research Scientific Computing Center (NERSC), a Department of Energy Office of Science User Facility using NERSC award ’GenAI@NERSC’. PDK acknowledges financial support from U.S. National Science Foundation’s ”The Quantum Sensing Challenges for Transformational Advances in Quantum Systems (QuSeC-TAQS)” program. AME and FZ’s work
was also supported by Ada Lovelace Centre at STFC (https://adalovelacecentre.ac.uk/), Physical Sciences
Databases Infrastructure (https://psdi.ac.uk) under EPSRC grant no. EP/X032663/1 and EPSRC under grant no. EP/V028537/1.
A. S. R. acknowledges support via a Miller Research Fellowship from the Miller Institute for Basic Research in Science, University of California, Berkeley.
T. J. I. acknowledges support via the Bakar Institute of Digital Materials for the Planet (BIDMaP).

SECTION: References