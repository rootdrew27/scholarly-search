SECTION: Provisioning for Solar-Powered Base Stations Driven by Conditional LSTM Networks

Solar-powered base stations are a promising approach to sustainable telecommunications infrastructure. However, the successful deployment of solar-powered base stations requires precise prediction of the energy harvested by photovoltaic (PV) panels vs. anticipated energy expenditure in order to achieve affordable yet reliable deployment and operation. This paper introduces an innovative approach to predict energy harvesting by utilizing a novel conditional Long Short-Term Memory (Cond-LSTM) neural network architecture. Compared with LSTM and Transformer models, the Cond-LSTM model reduced the normalized root mean square error (nRMSE) by 69.6% and 42.7%, respectively. We also demonstrate the generalizability of our model across different scenarios. The proposed approach would not only facilitate an accurate cost-optimal PV-battery configuration that meets the outage probability requirements, but also help with site design in regions that lack historical solar energy data.

SECTION: IIntroduction

The energy consumption of information and communication technologies (ICT) has been steadily growing and is about 10% of worldwide electricity consumption today[1]. The burning of fossil fuels significantly contributes to global climate change, leading to substantial biodiversity loss, widespread pollution, and posing a serious threat to the health and stability of planetary ecosystems. Utilizing renewable energy sources is a critical strategy for reducing carbon emissions and the overall carbon footprint. Fortunately, there is a growing trend towards renewable energy sources. Solar-powered base stations significantly reduce carbon emissions, as well as potential costs savings in the long term by avoiding the need to pay for energy. These “off-the-grid” base stations also have the added benefit of being resilient against natural disasters. Rather than relying on backup diesel generators, solar-powered base stations present a sustainable alternative for temporary or permanent climate-resilient infrastructure. The challenge lies in designing these stations to ensure their reliable operation. This involves a delicate balance between having sufficient solar panels and batteries for continuous power, and minimizing these components to save costs.

Accurately predicting energy income vs. energy demand is crucial for designing effective solar-powered base stations. Two important design parameters are the number of photovoltaic (PV) cells, and the battery capacity. These parameters are informed by the desired quality of service (guarantees of throughput, latency, uptime, etc.). In this work, we consider uptime, or outage probability, as the most fundamental aspect of quality of service. If the batteries fail to provide sufficient energy, the base station experiences an outage. The design goal is to maximize the uptime while minimizing the system cost. Accurate prediction of energy income allows us to minimize the number of purchased PV panels/batteries needed to achieve a desired outage probability.

Different from the prior studies, this work explores a purely solar-powered macro base station, aligning the power consumption model with typical 5G sites. This paper introduces the Cond-LSTM model, designed to achieve more precise predictions, particularly benefiting macro base stations, which consume significantly more energy than previously-studied LTE or 5G micro base stations.

In summary, our contributions consist of:

Creation of a highly-accurate conditional Long Short-Term Memory (Cond-LSTM) neural network to predict the energy income of solar base station sites, and a corresponding algorithm to provision the minimum solar equipment to achieve desired system performance.

Adapting existing power consumption models to be appropriate for macro 5G sites.

Evaluation of the Cond-LSTM model versus other approaches (Markov, non-conditional LSTM, Transformer) across various geographical regions, as well as evaluation of how well our model generalizes to new sites.

SECTION: IIBackground

Many prior works in this area rely on Markov models[2]. Chamola and Sikdar used a Markov process to model the PV panel harvesting energy and battery level to evaluate the outage probability of a solar powered base station[3,4]. Gorla and Chamola[5]utilized a Markov process to estimate the overall battery lifetime for a solar powered cellular base station with a given PV panel wattage.[6,7,8]also introduced Markov chain as a commonly published process for predicting solar radiation and energy harvesting. Markov models are relatively simple to implement and understand, making them an efficient choice for modeling PV panel harvesting. However, they oversimplify complex weather patterns by dividing them into several discrete categories types, leading to limited accuracy.

LSTM models are an alternative approach that utilizes machine learning for predicting energy harvesting, demonstrating notable accuracy[9,10,11]. Ku et al.[12]utilized a Convolutional Neural Networks (CNN)-LSTM model to predict energy states in mobile edge computing systems. Han et al.[13]present a prediction method based on LSTM for the stand-alone photovoltaic/wind/battery microgrid. Our proposed Conditional LSTM (Cond-LSTM) model bifurcates the network into two components: classification and LSTM. The outcome of the classification is then fed into the LSTM network as a conditional input to enhance its performance. Cond-LSTM models have demonstrated their utility in applications such as melody generation[14]and spoken dialogue systems[15], but to the best of our knowledge, Cond-LSTMs have yet to be explored for energy harvesting predictions. Our work pioneers the application of Cond-LSTM in telecommunications provisioning by predicting energy harvesting from PV panels. Transformer models, which are based solely on attention mechanisms, without using convolutional or recurrent layers[16], have emerged since 2019 and demonstrated powerful capabilities across a wide range of modern deep learning applications. Several papers have published applications of Transformer models and hybrid methods in solar energy forecasting, such as[17,18,19,20]. In the following sections, we compare the performance of our Cond-LSTM model against both Markov, traditional LSTM and Transformer approaches.

SECTION: IIISystem Model

Figure1presents the high-level architecture of a solar-powered base station. This system harnesses energy from sunlight through PV panels, which, in conjunction with batteries, powers the base station. During sunny conditions, the PV panels generate sufficient energy, a portion of which directly powers the base station, while the excess is stored in batteries. In contrast, during nighttime or cloudy days when the PV panels are unable to generate adequate energy, the energy stored in the batteries is utilized to sustain the operations of the base station.

SECTION: III-AHarvesting Energy Models

Traditional LSTM models exhibit satisfactory performance in predicting harvesting energy for micro systems but encounter limitations with macro systems. Transformer models achieve slightly higher accuracy than LSTM[21]but need more calculation resource consumption. Motivated by the challenge of enhancing solar energy prediction accuracy for macro base stations, we introduce the Cond-LSTM model to significantly improve prediction accuracy while having a smaller model size. Specifically, we construct a conditional neural network tailored to solar activity patterns. This is crucial because, for high-capacity PV panels, data during sunlight hours display significant variability compared to other times. Segregating predictions for non-sunlight hours into a separate neural network diminishes data variability and improves data smoothness, thereby facilitating more accurate forecasting. The inputs we are using include time information (Month, Hour), Direct Normal Irradiance (DNI), Diffuse Horizontal Irradiance (DHI), Global Horizontal Irradiance (GHI), Dew Point, Temperature, Pressure, Humidity, Wind Direction, Wind Speed, and Surface Albedo. Differing from a traditional LSTM model, our model instead divides the inputs into two parts. Inputs with selected feature DHI are fed into a self-defined lambda layer, while other features are fed into the LSTM model. DNI, DHI, and GHI are three key features most closely related to solar activity. While DNI is strongly influenced by the angle of sunlight and approaches zero during sunrise and sunset, we consider DHI, which is more associated with diffuse radiation, as the input for the lambda layer. GHI, encompassing both DNI and DHI, could also be used for the lambda layer, but we allocate it to the LSTM layer to aid in prediction. The output of lambda layer will decide if we will accept the outputs from LSTM layer. TableIdisplays the hyperparameters of LSTM and Cond-LSTM, with the majority kept consistent to ensure a fair comparison, except for a few essential modifications necessitated by the model construction. Both models are single-layer LSTM/Cond-LSTM architectures, each containing one dense layer.

We utilize 21 years of statistical weather data provided by the National Renewable Energy Laboratory (NREL)[22], comprising hourly solar irradiance data for specific locations. The weather data is then processed through PySAM of the System Advisor Model (SAM) Software Development Kit[23]to generate the hourly energy output of a PV panel with a specified rating. This serves as the ground truths for our evaluations. Although we evaluated only four typical locations in different climate zones across the United States, the generalization evaluation in this paper demonstrates that the proposed model, with stable and high accuracy, effectively learns the relationship between weather and solar harvesting. This model can be generalized to other climate zones without retraining and still achieve high prediction accuracy when local weather data is provided.

In addition to AI/ML-based modeling,
we also compare our results against a three-state first-order Markov process. The details of this Markov chain can be found in[5].
In the Markov model, 20 years of data are used to compute the transition matrices for different months, with an additional year of data dedicated to verifying accuracy. For the LSTM, Transformer and Cond-LSTM models, the dataset is segmented into training data (18 years), validation data (2 years), and testing data (1 year). The Cond-LSTM model introduces a conditional neural network architecture designed to process the DHI feature in conjunction with other inputs, effectively distinguishing between non-sunlight hours (with zero harvesting) and sunlight hours. It incorporates LSTM and Dense layers for predictive tasks. Cond-LSTM is applied to the RobustScaler normalization to enhance neural network performance, while we found that LSTMs and Transformers perform better with MinMaxScaler. Furthermore, the training process of all LSTM, Transformer and Cond-LSTM is optimized through the utilization of EarlyStopping, ModelCheckpoint, ReduceLROnPlateau, and a bespoke LearningRateScheduler, all contributing to improved training efficiency and model accuracy. Figure2illustrates the process flow for predicting energy harvested by PV panels using the Cond-LSTM model.

SECTION: III-BTraffic Model

We have grounded our power consumption model in 5G data reported in recent years. Specifically, our traffic model leverages generative normalized traffic data[24], and the generative model is itself trained on empirical data. The normalized traffic data has been adjusted to correspond with 5G power consumption as reported by Huawei[25]. Based on Huawei’s data indicating that the Remote Radio Unit (RRU) and Baseband Unit (BBU) requirements for each site require a power supply exceeding 11.5 kilowatts, we assume a peak power consumption of 11.5 kW. The remaining power consumption is calculated using the following formula[26]:

where the,, andare the ideal power consumption for the power amplifier, baseband unit, and transceiver, respectively. They were taken as,, and. The efficiencyof these parameters depends on the number of connections(load), as follows:,andrespectively, whereis a coefficient for the efficiency varies with load, andrepresents the part of the efficiency that is not load-dependent.,andare the loss factors due to the rectification, regulation, and cooling respectively. All the efficiency and loss factors above are between 0 and 1. The parameteris contingent upon the hardware design and specifications of the device and is considered negligible unless the load approaches the magnitude of. Peak load is around 14000, so variation of efficiencies with the load is very weak, with all thewere taken as. The efficiencies were taken as,,,, which we take the same parameters as the article[26].is set to be 0.47 according to[27]. Each base station typically has 3 hexagonal sub-sectors (thus) and we assume every antenna is deployed for 10,000 devices as in[26]. So the number of antennas for each sub-sector is.
The auxiliary power is neglected because of its independence of the load.

SECTION: III-CSizing the PV Panels and Battery

PV Panel:We select a configuration of 72 cells111For both PV panels and batteries, the prices are drawn from the options available in an online retailer as of Mar 19th, 2024. For cost comparisons, we use Mission Solar 430W monocrystalline MIN-MSE430SX9Z ($244.22) and the Generac PWRcell 3.0kW Lithium-Ion Battery Module G0080040 ($2093.37)..

Battery Bank:Lithium-ion batteries, due to reliability, modularity, and durability.

Optimal Sizing:To determine the optimal number of PV panels and batteries while considering the tolerable outage probability and the need to minimize costs, we assess the residual energy from the previous hour in the batteries,, plus the energy harvested in the current hour,. We then compare this sum to the current hour’s energy consumption,, wheredenotes the hour. We assume that all Lithium-Ion batteries are fully charged prior to the base station’s operation, with each battery’s capacity,, being 3.0 kWh. To prevent battery damage due to excessive discharge, a lower limit is established at 20% of a battery’s capacity. Consequently, the base station operates normally if, where theis the number of batteries andis the number of PV panel modules. Conversely, an outage occurs if. In the sizing model, it is assumed that a maximum of one hour of outage is permissible over a span of approximately a month (), which corresponds to 99.9% uptime. In this analysis, installation and maintenance expenses are not considered. The constrained optimization problem is described below:

Available Energy:

Outage Constraints:

Battery Energy Update:

Trimmed Battery Constraints:

Battery Capacity Constraints:

A Mixed-Integer Linear Programming (MILP) approach with big-M method is used to solve this problem, where M is a sufficiently large constant to force a constraint to be either active or inactive. Taking the Iowa (IA) region as an example, for 99.9% uptime, the harvesting data are calculated via Cond-LSTM. Then the data are used in the MILP to solve the optimal solutions for the number of solar panels and storage batteries (which are 47 and 22 respectively for the Iowa (IA) in our simulation).
As the day progresses, the battery bank becomes fully charged to a 66 kWh capacity, which corresponds to 52.8 kWh of usable capacity due to the system policy of never draining the batteries below 20%.

SECTION: IVEvaluations

SECTION: IV-AEvaluation: Energy Harvesting Forecasting Methods

In this section, we evaluate the energy harvesting predictions made by a Cond-LSTM, in comparison LSTM , Transformer and Markov models. TableIIassesses the models’ accuracy for a 48.94 kW panel through RMSE for hourly and daily predictions, as well as Mean Absolute Error (MAE), Mean Error (ME), and Mean Percentage Error (MPE) for daily energy harvesting predictions. The results quantify the error metrics in watts, where ‘H’ denotes hourly predictions and ‘D’ indicates daily estimates. An arrow pointing downward signifies that lower values reflect superior predictive performance. The comparative analysis reveals that the Cond-LSTM model significantly outperforms the other approaches. We used the same dataset for all models evaluated in this paper to ensure fairness. Variations in PV panel sizes and data lengths can significantly impact most error metrics. Normalized RMSE222nRMSE is defined as, where A represents actual data(nRMSE) is provided for comparing with results from other papers, as this metric is not significantly affected by PV panel size or data length. Prior works found that LSTMs achieve 3.6% nRMSE with 600 epochs[28]. In comparison, our Cond-LSTM model achieves 0.78% nRMSE with a maximum of 500 epochs.

We also evaluated the LSTM and Cond-LSTM models using a time-series split to separate training and testing data across several partitions, allowing us to validate the model predictability across different scenarios. Data were partitioned four ways, with the training and test data distributions set as 4 years/4 years, 8 years/4 years, 12 years/4 years, and 16 years/4 years. We applied the time-series split separately for data from four regions, assessing both RMSE and nRMSE for each scenario. Fig.3depicts the time-series split, cross-validation across different regions shows that Cond-LSTM outperforms the traditional LSTM across all four regions.

SECTION: IV-BEvaluation: Applicability to Different Regions

To assess how Cond-LSTM performance changes depending on local weather patterns, we selected several areas characterized by their distinct climatic features and trained a model for each location. We chose Rapid City in South Dakota (SD) (renowned for its unpredictable weather patterns[29]) to test the model’s performance in a variable climate environment.
Another two regions selected were: California (CA), representing the western United States, and Virginia (VA), reflecting the eastern United States. Similarly, for each location, 20 years of historical data are used for model development and 1 year of data for evaluation. Results show that the RMSE of the Cond-LSTM prediction for different regions still remain low even for a large size PV panel (DC rating). The RMSE of South Dakota was the highest, at. The RMSEs of all other locations are actually better (improvement). The results shows that for all those regions, Cond-LSTM have a stabler and much more accurate prediction than Markov, LSTM and Transformer method. Figure4presents the nRMSE (normalized by range) for the Markov, LSTM, Transformer and Cond-LSTM models across four distinct locations. LSTM, Transformer and Cond-LSTM models exhibit stability across varying weather conditions, in contrast to the Markov model, which exhibits instability across different datasets. Notably, the Cond-LSTM achieves the highest prediction accuracy, with anfor Iowa, California, South Dakota and Virginia respectively. In addition, we investigate the model sizes of the three machine learning models, as shown in TableIII. Although the Transformer model achieves comparable accuracy, it has a significantly larger model size in terms of parameters, overall model size, and floating point operations per second (FLOPs). The proposed Cond-LSTM outperforms in both accuracy and resource efficiency.

SECTION: IV-CEvaluation: Generalizability

In this section, we evaluate how well a model trained for one location can perform at a new location without re-training. We trained a general model by using 2000 - 2019 data from the Iowa region, and then used the pre-trained model to predict the 2020 year harvesting data for locations in California, South Dakota and Virginia. The ability to use a pre-trained model helps avoid the financial and environmental costs of re-training a model for every new location.

The nRMSE (normalized by range) of the general model’s prediction for those regions are,,, respectively. Compared to the Cond-LSTM models trained specifically for a region, a non-conditional LSTM trained on local data has anRMSE difference, while Markov based on the same data has annRMSE difference. The general Cond-LSTM model, however, only showsnRMSE difference, which is similar to the accuracy of LSTMs specifically trained on the local data. These results extend beyond the specific case of a model trained on Iowa being evaluated in other locations. If the model is trained solely on data from CA, SD or VA, and then evaluated in new locations, the results are similar: the ‘general’ model only has an 2.9% increase in nRMSE, on average. The results shows that by using a Cond-LSTM, we can use a model trained in one place to predict the harvesting energy of other locations by feeding the weather data to the model with a high accuracy.

TableVpresents the PV/battery numbers and associated costs obtained using a model that makes predictions in new locations. Additionally, we compare the performance of Cond-LSTM, Transformer (generalized), and LSTM (generalized) models, demonstrating that the Cond-LSTM predictions closely match the ground truth. This indicates that a model trained with data from one location can still accurately predict the size of a solar-powered system in another. Furthermore, when provisioning for new locations—particularly those with insufficient historical
weather data for effective training or no solar harvesting
data—short-term weather data can be used effectively by leveraging a well-trained model from regions with abundant historical weather and harvesting data.

SECTION: IV-DEvaluation: Sizing the Solar Energy System and Cost

The results in TableIVindicate that the Markov models exhibit significant errors in estimating the size of solar-powered systems. Although the LSTM model and Transformer yields good results, the Cond-LSTM model outperforms both. However, this marginal discrepancy between the LSTM, Transformer and Cond-LSTM models can be attributed to the low DC rating (0.43 kW) used for a single PV panel module. The benefits of our algorithm become more pronounced when using larger PV panels or custom-designed integrated panels. As the size of each panel grows, over or under provisioning by a single panel can cause the error to amplify in size due to the increased power per PV panel. This will lead to considerable increases in RMSE for the non Cond-LSTM approaches, as demonstrated in TableII.

SECTION: VConclusion and Future Work

This paper introduces an accurate forecasting approach Cond-LSTM that designed for optimizing the provisioning of solar-powered macro cellular base stations. Firstly, the performance of the Cond-LSTM model is evaluated against three established forecasting methods: the Markov model, LSTM, and Transformer. Using a comprehensive set of error evaluation metrics, the results demonstrate Cond-LSTM’s superior accuracy and smaller model size. Secondly, the versatility of our model across various geographic regions is assessed, demonstrating its broad applicability. Then, incorporating scenarios that closely mirror the energy consumption patterns of macro 5G base stations and a given tolerable power outage rate, we simulated the number of PV panel modules and battery modules required for a solar-powered 5G base station. The results showed that our model is highly similar with the results calculated by true data, enabling precise determination of the required quantities of PV panels and storage batteries. Finally, we show that our model, once trained on data from a single region, can effectively forecast solar-powered system outputs and inform sizing decisions in various other regions. This capability is particularly beneficial for establishing solar base stations in locales without extensive historical data on solar energy capture. In practical applications, the model can be trained using historical solar harvesting data from one area and then applied to forecast solar energy production in regions with only short-term weather data, thereby facilitating the establishment of solar-powered base stations in such areas.

In the future, the precision of this model will also facilitate the power allocation process, as accurate solar energy forecasting plays a crucial role in the operation of solar-powered base stations. We plan to integrate reinforcement learning in the model for more complex scenarios, such as addressing the impact of shadows in solar energy harvesting, as well as optimizing energy management and resource allocation. Our proposed model, with its smaller size, is more sustainable for applications in smart energy management and resource allocation. We will also consider optimizing the model to further reduce computational resource consumption.

SECTION: References