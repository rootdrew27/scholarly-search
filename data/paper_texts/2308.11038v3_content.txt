SECTION: Logistics Hub Location Optimization: A K-Means and P-Median Model Hybrid Approach Using Road Network Distances

Logistic hubs play a pivotal role in the last-mile delivery distance; even a slight increment in distance negatively impacts the business of the e-commerce industry while also increasing its carbon footprint. The growth of this industry, particularly after Covid-19, has further intensified the need for optimized allocation of resources in an urban environment. In this study, we use a hybrid approach to optimize the placement of logistic hubs. The approach sequentially employs different techniques. Initially, delivery points are clustered using K-Means in relation to their spatial locations. The clustering method utilizes road network distances as opposed to Euclidean distances. Non-road network-based approaches have been avoided since they lead to erroneous and misleading results. Finally, hubs are located using the P-Median method. The P-Median method also incorporates the number of deliveries and population as weights. Real-world delivery data from Muller and Phipps (M&P) is used to demonstrate the effectiveness of the approach. Serving deliveries from the optimal hub locations results in the saving of 815 (10%) meters per delivery.

m.basheer@kfupm.edu.sa

SECTION: 1Introduction

The need for urban logistics has been expanding quickly in terms of both scope and intensity throughout the current economic globalization and e-commerce boom (Yang et al.,,2022). The Covid-19 pandemic has further accelerated this trend by changing people’s traditional buying habits, as observed by the improved financial performance of logistics organizations in 2020 (Atayah et al.,,2022). For instance, the e-commerce sector generated $3.351 trillion in global sales in 2019 and is predicted to reach $6.169 trillion by 2023 (Leblow,,2021). Because of this upward trend, small, medium-sized, and micro businesses have been able to bear the brunt of Covid-19. Similar growth has been observed in Pakistan, where the value of the e-commerce sector was $548.89 million in 2021 with a growth of 35% in the first quarter (Shezad,,2021).

This growth has consequently led to more delivery parcels being packed, shipped, and transported by logistics providers. All parcels invariably pass through a Logistics Hub (LH) on their way to the customer. A LH may be defined as a distribution center that connects other transportation systems including local, national, and international inside which parcels may be sorted, consolidated, stored, and finally shipped to their respective locations (Shahparvari et al.,,2020). The logistics system as a whole is affected by the decision of where to locate facilities across the network. The unoptimized location of a LH leads to delivery vehicles traveling longer distances hence leading to negative spillovers such as emission of harmful gasses into the environment. As a result, a LH has a significant effect on carbon emissions in the delivery processHiggins, [2011]since logistics transportation considerably contributes to environmental pollution and greenhouse gas effects (Agyabeng-Mensah et al.,,2020). For example, road freight transport emitted over 1.8 billion tonnes of CO2in 2019 (ITF,,2019). Spillovers also include higher delivery costs. Last-mile delivery accounts for nearlyof total shipping costs (OptimoRoute,,2020). Fuel costs account for approximatelytopercent of the overall last-mile delivery expenses (DispatchTrack,,2021). Traveling longer distances due to unoptimized hub locations leads to more fuel consumption and therefore higher total costs for last-mile deliveries. Moreover, our discussion with logistics operators also highlighted the location of LH as one of the most significant problems to solve.

The hub location problem is a significant issue with several applications in fields like telecommunications and transportation (Qin et al.,,2017). One such domain is the logistics industry. Most studies that try to solve this Multi-Facility Location Problem (MFLP) use non-road network distances. Euclidean or other sorts of distance calculations are used (Celik Turkoglu et al.,,2020). Numerous optimization techniques have been used to tackle the problem of hub location optimization.Shahparvari et al., [2020]use multiple criteria techniques for selecting suitable locations for LH. The novel Mixed Integer Quadratic Constrained Programming (MIQCP) method is used to cluster centroids representing the most suitable sites. A weighted K-Means algorithm has also been employed in studies to determine the optimal location of container storage and distribution centers (Mulesa et al.,,2021;Gocer et al.,,2022). Multiple characteristics of potential locations as weights are used to determine optimal points.Sharma et al., [2017]propose a two-part method. First making use of K-Means clustering after which in the second part, for each cluster a Mixed Integer Linear Programming (MILP) technique is implemented to help determine the maximum profit-yielding facility.Esnaf et al., [2009]utilize a Fuzzy clustering-based hybrid method to locate multiple facilities. Firstly, customers are grouped based on geographical location using cluster analysis. Then, cluster centers are used to locate facilities. Finally, every cluster is solved independently, treating each as a single facility location problem. The center of gravity method is used to improve facility location. Similarly,Önden et al., [2018]apply fuzzy analytic hierarchy process, spatial statistics, and analysis approaches to determine logistics center locations.Li et al., [2011]use a two-part methodology to optimize hub placement. In the first part, the Axiomatic Fuzzy Set (AFS) clustering method is employed to evaluate the logistics center location. In the second part, a Technique for Order Preference by Similarity to Ideal Solution (TOPSIS) is used to determine the final selection.Özceylan et al., [2016]use a Multi-Criteria Decision Making (MCDM) model built on a Geographic Information System (GIS) to assess suitable sites for freight communities. A four-step model is used to define weight through the Analytical Network Process (ANP) and to find the optimal location using the TOPSIS technique.Yang et al., [2016]focus on Intermodal Hub-and-Spoke (IH&S) network design and optimization taking into account mixed uncertainties in both transportation cost and trip time.Ulutaş et al., [2020]employ fuzzy SWARA and CoCoSo methods to locate logistics centers. However, the distance metric used for optimization in all these studies is based on non-road network distances, with Euclidean calculations being the most common. Euclidean distance is defined as the straight line distance between two points in a planeBlack, [2004], underestimating road network distance. Non-road network-based approaches could lead to erroneous and misleading results since they misrepresent ground distances. Some researchers have tried to overcome this issue by multiplying Euclidean calculations with a constant factor of 1.25 to transform them into real-world distances (Esnaf et al.,,2009). Similarly,Mulesa et al., [2021]use a novel optimization method to determine the location of the logistics hub which is closer to the most distant of the roads. Roads are treated as straight lines, and the algorithm uses custom, non-road network distances.Wen et al., [2016]implement a variation of Euclidean distance for cluster analysis. In this approach, weighted spatial patterns are used to find optimal locations for LH. For distance metric, Euclidean is used from centroid to the point. The distance is normalized by the sum of distances from all centroids. Nevertheless, these approaches do not incorporate true network distance for LH optimization.

In the literature, road networks have been used widely for station location and other problems to determine the most optimal site.Yang et al., [2020]use road network distance for optimal dynamic traffic network planning.Bozkaya et al., [2010]use road networks as input to determine the optimal set of locations in the supply chain of a firm that is operating under competition.Kuby et al., [2009]use road networks with average speeds to determine the optimal location of hydrogen stations in Florida. However, a road network distance matrix has not been employed to solve the problem of location optimization for LH. The contributions of this study are as follows:

Incorporate ground truth road network for computation of accurate distances in the location optimization problem.

Propose a hybrid approach utilizing both K-Means and P-Median to determine optimal hub locations serving the deliveries while minimizing travel distance.

Demonstrate the effectiveness of the proposed approach using real-world delivery data.

The rest of the paper is structured as follows: Methodology (section 2) explains the hybrid approach using road network distances, Application and Analysis (section 3) outlines our case study area and data sources used including baseline measures, Results (section 4) demonstrates effectiveness of the proposed approach and Conclusion (section 5) provides concluding remarks.

SECTION: 2Methodology

SECTION: 2.1Problem Description and Formulation

The proposed approach attempts to answer the following question:Givennumber of LH clusters defined as a set of spatial points andtotal delivery points, where should hubs be placed such that average road network distance from hubs to the respective locations per delivery is minimized?This can be formulated as the following optimization problem with an objective function minimizing the average distance traveled per delivery:

whereis unique delivery location and= 1 ifcluster, else= 0. The functionreturns road network distance from hubof clusterto point. Distance between points is calculated using a road network with directions incorporated indicating whether a road is two-way or one-way.

SECTION: 2.2Cluster Formation

To optimize the above objective function, the proposed approach makes use of the K-Means algorithm which follows two steps. In the first step, the distance between all the points and initial centroids is calculated. The initial centroids can be any random spatial points and not necessarily LH. Based on these distances, points are associated with the nearest centroid. In the second step, based on the new association of points with the nearest centroid, the location of the centroids of each cluster is updated. These steps are repeated until the maximum number of iterations is reached or changes in the location of the centroids are minimal. The maximum number of iterations and change cutoff are input to the algorithm (Jin et al.,,2017). The distances in the first step are calculated using the QNEAT3 plugin in QGIS which makes use of road network. The plugin uses Dijkstra’s algorithm to determine the shortest distance between origin and destination (Dijkstra,,2022).

SECTION: 2.3Hub Location Optimization

Traditionally, the centroid update step (second step) uses the mean position of points in the cluster to update centroids. However, this approach is not suitable since centroids/LH need to be updated based on road network distances. To account for this point, we use the well-defined P-Median model as part of the algorithm. The P-Median model is defined as follows:

whereis the total possible hub locations ,is the total number of unique delivery locations,is the weight of delivery location,quantifies road network distance between-th delivery location and-th hub location,is 1 ifis assigned toelse 0,is 1 if LH is located atelse 0 andis the number of LH to be determined. The first constraint ensures that anis assigned to only one. The second constraint makes sure that anis assigned toonly if a LH exists at. The third constraint is there to make certain that the total number of LH is. Since this approach locates only 1 center when updating the centroid for each cluster,is set to 1. To determine, the cluster is divided into a grid of resolution 1 km x 1 km. The center of the grid is attached to the nearest road network node. Using these as possible hub locations, the P-Median problem mentioned above is solved using the QNEAT3 plugin inputting road network distances with directions. For weight, the number of deliveries performed at unique locationis used in phase 1. In phase 2, the above methodology is repeated using a layer of population estimates to make the approach more robust. For this purpose, the WorldPop data set is used that provides population estimates at a 1km x 1km resolution. Each pixel in the dataset provides a value of population i.e., population per pixel (ppp) (Worldpop,,2018). Using this data set, pixels are converted to 1km x 1km polygons, and their centroids are determined. These points are used to form clusters and determine LH. Weight of each point,is calculated as follows:

whereis the number of normalized deliveries performed andis normalized ppp in grid.is a hyper-parameter quantifying the weight given to each term in.

SECTION: 3Application and Analysis

This study takes Lahore, Pakistan as a case to draw inferences about LH optimization. The city has a population of around 11.13 million, with approximately 1,744,755 households (PBS,,2017). The GDP of the city is estimated to be over 1 trillion rupeesShezad, [2021]with the services sector having the highest share in the economy (LCCI,,2017). These high demographic and GDP numbers also correspond with a higher e-commerce activity in Lahore (Ahmed,,2016).

The data sources for this research mainly include delivery data, road network, and population distribution. The delivery data is gathered from Muller and Phips (M&P) logistics. M&P is one the largest logistics operators and provides services all across Pakistan. The road network dataset has been prepared by the National Transport Research Centre (NTRC). NTRC is a government department that deals with transportation research and policy across the country. Worldpop data is used to draw inferences about population distribution. The delivery data set consists of 26,837 ‘unique Geo-Coordinate’ deliveries spread across Lahore. The bulk of these deliveries have been performed in the months of January and February of 2022, over a span of 46 days.
Deliveries with ‘unique Geo-Coordinate’ are defined as those that have distinct pin locations. For instance, a rider may have delivered 10 packages at any particular pin position, which would be represented in the data as 10 different entries. Since each of these deliveries would have the same pin location, they will all be counted as having a single ‘unique Geo-Coordinate’. The road network acquired by the NTRC includes the following types of roads: primary, secondary, local, motorway, metro, and highway. Motorways and metro are excluded from the network. This is because according to M&P, most of their deliveries are made using motorbikes which cannot travel on these roads due to local regulations. A direction field is also present in the network for each road segment. Each segment may have one of the following values: North Bound (NB), South Bound (SB), East Bound (EB), West Bound (WB), and None. None roads are two-way direction.
As a baseline, we clustered the data points according to existing M&P hubs using the QNEAT3 plugin in QGIS. Points are clustered based on the shortest distance. The delivery point which is closest to a given hub is assigned to that hub. As mentioned previously, QNEAT3 takes road network with directions, hub locations, and delivery locations as input. The Origin-Destination (OD) matrix is computed by the plugin which contains the shortest distance between an origin-destination pair. Distances are determined using the road network. The average distance traveled per delivery from a hub to a delivery location is 7801 meters. It is worth mentioning the delivery model of M&P at this point. Riders collect their parcels from LH and travel to their respective areas. Therefore, only the first delivery made by riders should be taken into consideration for this study. However, given deliveries are uniformly distributed across Lahore, any delivery can be the first one of the day.

SECTION: 4Results

In phase 1, using M&P deliveries data, we ran our algorithm for 10 iterations. Current M&P hubs are used as initial centroids. The cutoff value is 10 meters. The total number of deliveries made at a ‘unique Geo-Coordinate’ are used as weights. For phase 2, the Worldpop dataset is used for clustering where the normalized number of deliveries and normalized ppp are used as weights. Using these weights, the algorithm is run forvalues of 0.5 and 0. The cutoff value and number of iterations remain the same. Fig.1shows the average distance per delivery for each iteration along with convex hulls of clusters formed for phase 1. Fig.1fis a monotonically decreasing graph which means that the algorithm is minimizing average distance during last-mile delivery.
With new clusters and LH in iteration 5, the average distance traveled per delivery decreases from 7801 meters to 6986 meters. The proposed framework reduces the average distance per delivery by 815 meters. The algorithm stops at iteration number 6 since the cutoff criterion is met. Fig.2shows all the centroids when using only the number of deliveries as a weight (phase-1) and incorporating population as a weight (phase-2). For regions 0 and 1, centroids in phase 2 get closer to the centroids of phase 1 as the value ofincreases. For region 2, there is no significant change in the centroids. This shows that for regions 0 and 1, the “pull” of the number of deliveries as weight is significant as compared to region 2. This effect can also be seen in Table1.

SECTION: 5Conclusion

Previous research focuses on a non-road network-based distance matrix to solve the problem of LH optimization. However, this matrix does not provide a precise measure for distance calculations between points and could lead to misleading results. The most significant effort to address this problem has been to multiply the distance by a constant factor to approximate road network distances. This study intends to bridge the gap in the literature by solving the problem of LH optimization using road network-based distance calculations. A hybrid approach has been developed that utilizes the K-Means algorithm to cluster delivery points. Based on these clusters, a P-Median approach is adopted to find the location of LH. Delivery data points, road network, and population data are used as input. Results show that optimized allocation of LH can significantly reduce the average distance traveled per delivery. The reduction in the average distance would lead to less fuel and time being spent on a particular journey. This would not only positively impact the financial and operational workings of logistics companies, but would also ensure a cleaner environment by cutting greenhouse gas emissions of rider vehicles. This work will inspire industry-standard geospatial solutions which would help alleviate operational concerns of the logistics industry in developing countries and provide a breathing space for the already degrading environment.
A possible area of further research is rider optimization: determining an optimal number of riders to be allocated to a region based on the number of deliveries in that region to reduce operations and management costs. Another area would be to replicate the approach in this study while determining the weights of each possible hub location using various factors. These factors could include CO2emissions, created job opportunities, noise level, accident risk, and others (Mrabti et al.,,2022).

SECTION: Acknowledgements

We acknowledge the support provided by M&P Logistics and NTRC for their active collaboration and for providing us with the necessary data sets used in this research work.

SECTION: References